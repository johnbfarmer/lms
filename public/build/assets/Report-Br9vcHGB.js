import{r as o,j as e,W as x}from"./app-DMNfrNhn.js";import{A as F}from"./AuthenticatedLayout-CK2JEpOV.js";import{T as R}from"./TopMenu-CY_O2CwH.js";import{L as V}from"./LmsTable-mTJkSn9W.js";import{S as v}from"./react-select.esm-BgOafunv.js";import{b as W}from"./Utilities-m0eG5Gao.js";import"./ApplicationLogo-0j7nhg8-.js";import"./transition-CpjbZLWG.js";import"./index-D-pQ_u0A.js";import"./index-ChdDc4Yc.js";import"./index-Bpl7TPNI.js";import"./index-DNms_AyM.js";function B(s){const[c,n]=o.useState(s.selected),r=s.students.map(t=>({key:t.id,value:t.id,label:t.name}));r.unshift({key:0,value:0,label:"Todos"});let a=null;r.some(t=>t.value==s.selected?(a=t,!0):!1);const u=t=>{n(t.value),s.onSelect(t)};return e.jsxs("div",{className:"text-center bg-white p-1 shadow w-full sm:p-4 flex",children:[e.jsx("div",{className:"w-fit",children:"Estudiante:"}),s.students.length>0&&e.jsx("div",{className:"w-full",children:e.jsx(v,{options:r,placeholder:"Escoge un alumno...",onChange:u,isClearable:!0,defaultValue:a})})]})}function D(s){const[c,n]=o.useState(s.selected),r=s.aggs.map(t=>({key:t.id,value:t.id,label:t.name}));let a=null;r.some(t=>t.value==s.selected?(a=t,!0):!1);const u=t=>{n(t.value),s.onSelect(t)};return e.jsxs("div",{className:"text-center bg-white p-1 shadow w-full sm:p-4 flex",children:[e.jsx("div",{className:"w-fit",children:"Agregación:"}),s.aggs.length>0&&e.jsx("div",{className:"w-full",children:e.jsx(v,{options:r,placeholder:"Escoge una agregación...",onChange:u,defaultValue:a})})]})}function te({auth:s,course:c,group:n,chapter:r,lessons:a,scores:u,students:t,unit:b,unitId:m,agg:d,studentId:f}){const[g,O]=o.useState(b),[U,$]=o.useState(m),[j,S]=o.useState(d),[w,N]=o.useState(f),I="Informe "+n.name,h=["C","LS","L","P"],L=h.indexOf(d),A=d==="P"?null:h[L+1],C=W({course:c},2);let y=e.jsx(R,{auth:s,title:I,courseId:c.id,show:["home","course"],breadcrumbs:C});function P(l){return d==="P"?l.userName:e.jsx(x,{href:route("group.report",{groupId:n.id,agg:A,unit:g,unitId:m,studentId:l.userId}),children:l.userName})}function E(l){return e.jsx(x,{href:route("problem.show",{id:l.unitId}),children:l.unitId})}const i=[{title:"Estudiante",field:"userName",sortable:!0,displayFormatter:P},{title:"Unidad",field:"unit",sortable:!0},{title:"# Problemas",field:"numProblems",sortable:!0},{title:"# Contestado",field:"problemsDone",sortable:!0},{title:"% Correcto",field:"userScore",sortable:!0}];let p="name";d==="P"&&(i[1].title="id de Problema",i[1].field="unitId",i[1].displayFormatter=E,delete i[3],delete i[2],p="unitId");const k=l=>{N(l.value)},T=l=>{S(l.value)},M=[{name:"Curso",id:"C"},{name:"Capítulo",id:"LS"},{name:"Lección",id:"L"},{name:"Problema",id:"P"}];return e.jsxs(F,{auth:s,user:s.user,header:!1,topMenu:y,children:[e.jsxs("div",{className:"p-8 border border-black rounded-md max-w-7xl mx-auto",children:[e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 flex flex-row",children:[e.jsx("div",{className:"w-1/2 ",children:e.jsx(B,{students:t,selected:f,onSelect:k})}),e.jsx("div",{className:"w-1/2 ",children:e.jsx(D,{aggs:M,selected:d,onSelect:T})})]})}),e.jsx("div",{className:"text-centermax-w-3xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center bg-white mx-auto max-w-3xl sm:px-6 lg:px-8",children:e.jsx(x,{href:route("group.report",{groupId:n.id,agg:j,unit:g,unitId:m,studentId:w}),children:"Ir"})})})]}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8",children:e.jsx(V,{columns:i,data:u,initialSort:p})})})]})}export{te as default};
