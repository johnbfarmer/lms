import{r as a,j as e,B as L}from"./app-kAcvB3Ux.js";import{A as M}from"./AuthenticatedLayout-BTQj_TMv.js";import{F as C,A as N,M as k}from"./FeedbackComponent-xrn3IyOj.js";import{H}from"./HybridDisplay-D0fBk6WU.js";import{T as B,L as E}from"./TopMenu-DJOQtgtT.js";import{L as F}from"./index.es-Uvg8-lmS.js";import"./ApplicationLogo-0xcsg2AI.js";import"./transition-BSqVVQhe.js";import"./Modal-CghwKJTc.js";const K=({auth:n,prob:t,answers:i,lesson:l,problemIds:g,lessonIds:_})=>{const[w,I]=a.useState(t.problem_text),[T,p]=a.useState(!1),[x,f]=a.useState(null),[b,d]=a.useState("right"),u=`${l.name}`,S=o=>{let s=0,h=i.length;i.forEach(y=>{let j=o.indexOf(y.id)>=0;y.is_correct?j&&s++:j||s++});let m=Math.floor(.5+100*(100*s/h))/100;f(m),p(!0),d("you scored "+s+" out of "+h+" for "+m+"%"),fetch(route("results.recordanswer",{id:t.id,answers:o,score:m}))},A=o=>{let s;o.is_correct?(s=100,d("Correct!")):(s=0,d("Not quite!")),p(!0),f(s),fetch(route("results.recordanswer",{id:t.id,answers:[o.id],score:s}))};let r,c;t.display_type==="text"&&(r=e.jsx("div",{dangerouslySetInnerHTML:{__html:w}})),t.display_type==="latex"&&(r=e.jsx(F,{children:t.problem_text})),t.display_type==="pdf"&&(r=e.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),t.display_type==="hybrid"&&(r=e.jsx(H,{content:t.problem_text})),t.problem_type_id===1&&(c=e.jsx(N,{answers:i,answerSelect:A})),t.problem_type_id===2&&(c=e.jsx(k,{answers:i,answerSelect:S}));let v=e.jsx(B,{auth:n,title:u,lessonId:l.id,neighboringProblems:g,show:["home","lesson","prob-set","prob-nav"]});return e.jsxs(M,{auth:n,user:n.user,header:!1,topMenu:v,children:[e.jsx(L,{title:u}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:r})})}),c,x!==null&&e.jsx(C,{feedback:b,points:x}),e.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:e.jsx("div",{className:"p-4 text-base sm:rounded-lg sm:p-1",children:e.jsx(E,{neighbors:_,lesson:l,showLessonLink:!0})})})]})};export{K as default};
