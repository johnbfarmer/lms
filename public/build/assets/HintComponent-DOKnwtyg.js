import{r as g,j as t}from"./app-kAcvB3Ux.js";import{G as S}from"./TopMenu-DJOQtgtT.js";import{A as $,M as F}from"./FeedbackComponent-xrn3IyOj.js";import{T as B}from"./TextInput-Cqzh2xBe.js";import{I as T}from"./InputLabel-fN9WKzCn.js";import{I as E}from"./InputError-BKtOSKll.js";import{H as V}from"./HybridDisplay-D0fBk6WU.js";import{L as A}from"./index.es-Uvg8-lmS.js";import{M as z}from"./Modal-CghwKJTc.js";function O(e){return S({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M248,56a8,8,0,0,1-8,8H192v40a8,8,0,0,1-8,8H136v40a8,8,0,0,1-8,8H80v40a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H64V152a8,8,0,0,1,8-8h48V104a8,8,0,0,1,8-8h48V56a8,8,0,0,1,8-8h56A8,8,0,0,1,248,56Z"},child:[]}]})(e)}function R(e){return S({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M321.94 98 158.82 237.78a24 24 0 0 0 0 36.44L321.94 414c15.57 13.34 39.62 2.28 39.62-18.22v-279.6c0-20.5-24.05-31.56-39.62-18.18z"},child:[]}]})(e)}function q(e){return S({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m190.06 414 163.12-139.78a24 24 0 0 0 0-36.44L190.06 98c-15.57-13.34-39.62-2.28-39.62 18.22v279.6c0 20.5 24.05 31.56 39.62 18.18z"},child:[]}]})(e)}function D(e){return S({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M112 64a16 16 0 0 1 16 16v136.43L360.77 77.11a35.13 35.13 0 0 1 35.77-.44c12 6.8 19.46 20 19.46 34.33v290c0 14.37-7.46 27.53-19.46 34.33a35.14 35.14 0 0 1-35.77-.45L128 295.57V432a16 16 0 0 1-32 0V80a16 16 0 0 1 16-16z"},child:[]}]})(e)}function G(e){if(e===parseFloat(e))return e;if(e!==parseFloat(e)&&e.indexOf("/")>=0){let s=e.split(" "),a=0,h=s[0];if(s.length<1||s.length>2)return NaN;if(s.length===2&&(a=s[0],h=s[1]),a!=parseInt(a))return NaN;let n=h.split("/");return n.length!==2||!n[1]?NaN:1*a+n[0]/n[1]}}function K(e){const[s,a]=g.useState(""),[h,n]=g.useState(!1),j=r=>{let y=r.target.value;a(G(y))};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:t.jsxs("div",{className:"mt-4",children:[t.jsx(T,{htmlFor:"myAnswer",value:"Tecla la respuesta:"}),t.jsx(B,{id:"myAnswer",type:"text",name:"myAnswer",value:s,className:"mt-1 block w-full",isFocused:!0,onChange:r=>a(r.target.value),onBlur:j,onKeyDown:r=>{r.key==="Enter"&&(e.answerSelect(s),n(!1))}}),t.jsx(E,{message:"",className:"mt-2"})]})})}),!h&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(s),a(""),n(!1)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Submit"})})]})}function le(e){const[s,a]=g.useState(e.problem.problem_text),[h,n]=g.useState(!1),[j,r]=g.useState(null),[y,k]=g.useState("right");console.log(e.answers);const N=o=>{let l=0,i=e.answers.length;e.answers.forEach(d=>{let x=o.indexOf(d.id)>=0;d.is_correct?x&&l++:x||l++});let m=Math.floor(.5+100*(100*l/i))/100;r(m);let v="you scored "+l+" out of "+i+" for "+m+"%";fetch(route("results.recordanswer",{id:e.problem.id,answers:o,score:m})),e.handleAnswer(e.problem.id,m,v)},p=o=>{let l,i;o.is_correct?(l=100,i="Correct!"):(l=0,i="Not quite!"),r(l),fetch(route("results.recordanswer",{id:e.problem.id,answers:[o.id],score:l})),e.handleAnswer(e.problem.id,l,i)},c=o=>{let l,i;console.log(e.answers);let m=parseFloat(e.answers[0].answer_text),v=parseFloat(e.answers[0].pct_tolerance),d=(1-v)*m,x=(1+v)*m;if(x<d){let L=x;x=d,d=L}console.log(o,m,v,x,d),o>=d&&o<=x?(l=100,i="Correct!"):(l=0,i="Not quite!"),r(l),fetch(route("results.recordanswer",{id:e.problem.id,answers:o,score:l})),console.log(l,i),e.handleAnswer(e.problem.id,l,i)};let u,C,_=e.totalHints<=0,w=_?"text-slate-400":"",f=_?"":"cursor-pointer",b=_?()=>{}:e.hint,H=t.jsx(O,{className:`${f} ${w}`,onClick:b,title:"enséñame los pasos"});w=e.hasNextProblem?"":"text-slate-400",f=e.hasNextProblem?"cursor-pointer":"",b=e.hasNextProblem?e.next:()=>{};let P=e.hints===null?"":t.jsx(q,{className:`${f} ${w}`,onClick:b,title:"próximo problema"});w=e.hasPrevProblem?"":"text-slate-400",f=e.hasPrevProblem?"cursor-pointer":"",b=e.hasPrevProblem?e.prev:()=>{};let M=e.hints===null?"":t.jsx(R,{className:`${f} ${w}`,onClick:b,title:"problema anterior"});w=e.problem!=null?"":"text-slate-400",f=e.problem!=null?"cursor-pointer":"",b=e.problem!=null?e.restart:()=>{};let I=e.hints===null?"":t.jsx(D,{className:`${f} ${w} text-sm37`,onClick:b,title:"reiniciar"});return e.problem.display_type==="text"&&(u=t.jsx("div",{dangerouslySetInnerHTML:{__html:e.problem.problem_text}})),e.problem.display_type==="latex"&&(u=t.jsx(A,{children:e.problem.problem_text})),e.problem.display_type==="pdf"&&(u=t.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),e.problem.display_type==="hybrid"&&(u=t.jsx(V,{content:e.problem.problem_text})),e.problem.problem_type_id===1&&(C=t.jsx($,{answers:e.answers,answerSelect:p})),e.problem.problem_type_id===2&&(C=t.jsx(F,{answers:e.answers,answerSelect:N})),(e.problem.problem_type_id===3||e.problem.problem_type_id===4)&&(C=t.jsx(K,{answers:e.answers,answerSelect:c})),t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto max-w-7xl space-y-1 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white px-4 shadow sm:rounded-lg sm:px-8 sm:py-2",children:[H,P,M,I,t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:u})})}),C]})})})}function se(e){let s=[],a=[],h=0;const n=g.useRef(null);e.hints&&e.hints.length>0&&(a=e.hints),a.forEach(c=>{h++<e.hintsToShow&&s.push(t.jsx("div",{children:t.jsx(A,{children:c.hint})}))});let j=s.map((c,u)=>t.jsx("div",{className:"my-4",children:c},u));const r=()=>{var c;console.log("scrollin"),(c=n.current)==null||c.scrollIntoView({behavior:"smooth"})};async function y(){await e.nextHint(),r()}let k=e.hintsToShow<a.length,N=y,p="cursor-pointer text-black";return k||(N=()=>{},p="text-slate-200"),t.jsx("div",{className:"mx-auto my-6 max-w-5xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(z,{show:e.show,onClose:e.onClose,maxWidth:"5xl",children:t.jsxs("div",{className:"bg-white p-1 shadow sm:rounded-lg flex flex-row max-w-5xl h-[400px] overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col min-w-[20%] h-full",children:[t.jsx("div",{className:`${p} cursor-pointer bg-white p-2 m-2 rounded-lg`,onClick:N,children:"siguiente paso"}),t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.onClose,children:"cerrar"})]}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col max-h-[400px] overflow-y-auto",children:[j,t.jsx("div",{ref:n})]})})]})})})}export{se as H,le as S,G as h};
