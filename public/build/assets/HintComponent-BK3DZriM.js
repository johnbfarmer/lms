import{r as d,j as t}from"./app-Clg8xQeH.js";import{G as y}from"./TopMenu-0yPtNJPX.js";import{A as L,M as I}from"./FeedbackComponent-Bc25FPvK.js";import{T as $,I as B}from"./TextInput-BMyqZeHS.js";import{I as F}from"./InputLabel-OplsOaup.js";import{H as E}from"./HybridDisplay-7Oipkh4D.js";import{L as C}from"./index.es-NlpGlFXz.js";import{M as T}from"./Modal-C2vzBqI8.js";function V(e){return y({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M248,56a8,8,0,0,1-8,8H192v40a8,8,0,0,1-8,8H136v40a8,8,0,0,1-8,8H80v40a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H64V152a8,8,0,0,1,8-8h48V104a8,8,0,0,1,8-8h48V56a8,8,0,0,1,8-8h56A8,8,0,0,1,248,56Z"},child:[]}]})(e)}function z(e){return y({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M321.94 98 158.82 237.78a24 24 0 0 0 0 36.44L321.94 414c15.57 13.34 39.62 2.28 39.62-18.22v-279.6c0-20.5-24.05-31.56-39.62-18.18z"},child:[]}]})(e)}function q(e){return y({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m190.06 414 163.12-139.78a24 24 0 0 0 0-36.44L190.06 98c-15.57-13.34-39.62-2.28-39.62 18.22v279.6c0 20.5 24.05 31.56 39.62 18.18z"},child:[]}]})(e)}function D(e){return y({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M112 64a16 16 0 0 1 16 16v136.43L360.77 77.11a35.13 35.13 0 0 1 35.77-.44c12 6.8 19.46 20 19.46 34.33v290c0 14.37-7.46 27.53-19.46 34.33a35.14 35.14 0 0 1-35.77-.45L128 295.57V432a16 16 0 0 1-32 0V80a16 16 0 0 1 16-16z"},child:[]}]})(e)}function G(e){const[n,x]=d.useState(null),[f,h]=d.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:t.jsxs("div",{className:"mt-4",children:[t.jsx(F,{htmlFor:"myAnswer",value:"Tecla la respuesta:"}),t.jsx($,{id:"myAnswer",type:"text",name:"myAnswer",value:n,className:"mt-1 block w-full",isFocused:!0,onChange:u=>x(u.target.value),onKeyDown:u=>{u.key==="Enter"&&(e.answerSelect(n),h(!1))}}),t.jsx(B,{message:"",className:"mt-2"})]})})}),!f&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(n),h(!1)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Submit"})})]})}function Y(e){const[n,x]=d.useState(e.problem.problem_text),[f,h]=d.useState(!1),[u,r]=d.useState(null),[p,O]=d.useState("right"),S=a=>{let s=0,l=e.answers.length;e.answers.forEach(j=>{let v=a.indexOf(j.id)>=0;j.is_correct?v&&s++:v||s++});let m=Math.floor(.5+100*(100*s/l))/100;r(m);let g="you scored "+s+" out of "+l+" for "+m+"%";fetch(route("results.recordanswer",{id:e.problem.id,answers:a,score:m})),e.handleAnswer(e.problem.id,m,g)},A=a=>{let s,l;a.is_correct?(s=100,l="Correct!"):(s=0,l="Not quite!"),r(s),fetch(route("results.recordanswer",{id:e.problem.id,answers:[a.id],score:s})),e.handleAnswer(e.problem.id,s,l)},_=a=>{let s,l,m=parseFloat(e.answers[0].answer),g=parseFloat(e.answers[0].pct_tolerance),j=(1-g)*m,v=(1+g)*m;a>=j&&a<=v?(s=100,l="Correct!"):(s=0,l="Not quite!"),r(s),fetch(route("results.recordanswer",{id:e.problem.id,answers:a,score:s})),console.log(s,l),e.handleAnswer(e.problem.id,s,l)};let w,b,N=e.totalHints<=0,i=N?"text-slate-400":"",o=N?"":"cursor-pointer",c=N?()=>{}:e.hint,k=t.jsx(V,{className:`${o} ${i}`,onClick:c,title:"show the steps"});i=e.hasNextProblem?"":"text-slate-400",o=e.hasNextProblem?"cursor-pointer":"",c=e.hasNextProblem?e.next:()=>{};let H=e.hints===null?"":t.jsx(q,{className:`${o} ${i}`,onClick:c,title:"next problem"});i=e.hasPrevProblem?"":"text-slate-400",o=e.hasPrevProblem?"cursor-pointer":"",c=e.hasPrevProblem?e.prev:()=>{};let P=e.hints===null?"":t.jsx(z,{className:`${o} ${i}`,onClick:c,title:"previous problem"});i=e.problem!=null?"":"text-slate-400",o=e.problem!=null?"cursor-pointer":"",c=e.problem!=null?e.restart:()=>{};let M=e.hints===null?"":t.jsx(D,{className:`${o} ${i} text-sm37`,onClick:c,title:"restart"});return e.problem.display_type==="text"&&(w=t.jsx("div",{dangerouslySetInnerHTML:{__html:n}})),e.problem.display_type==="latex"&&(w=t.jsx(C,{children:e.problem.problem_text})),e.problem.display_type==="pdf"&&(w=t.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),e.problem.display_type==="hybrid"&&(w=t.jsx(E,{content:e.problem.problem_text})),e.problem.problem_type_id===1&&(b=t.jsx(L,{answers:e.answers,answerSelect:A})),e.problem.problem_type_id===2&&(b=t.jsx(I,{answers:e.answers,answerSelect:S})),(e.problem.problem_type_id===3||e.problem.problem_type_id===4)&&(b=t.jsx(G,{answers:e.answers,answerSelect:_})),t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto max-w-7xl space-y-1 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white px-4 shadow sm:rounded-lg sm:px-8 sm:py-2",children:[k,H,P,M,t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:w})})}),b]})})})}function ee(e){let n=[],x=[],f=0,h="";e.hints&&e.hints.length>0&&(x=e.hints),x.forEach(r=>{f++<e.hintsToShow&&n.push(t.jsx("div",{children:t.jsx(C,{children:r.hint})}))});let u=n.map((r,p)=>t.jsx(d.Fragment,{children:r},p));return e.hintsToShow<x.length&&(h=t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.nextHint,children:"next hint"})),t.jsx("div",{className:"mx-auto my-6 max-w-7xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(T,{show:e.show,onClose:e.onClose,children:t.jsxs("div",{className:"bg-white p-12 shadow sm:rounded-lg flex flex-row justify-between w-full",children:[t.jsx("div",{className:"",children:u}),t.jsxs("div",{className:"flex flex-col",children:[h,t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.next,children:"next problem"})]})]})})})}export{ee as H,Y as S};
