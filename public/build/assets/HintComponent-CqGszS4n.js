import{j as t,r as m}from"./app-DMNfrNhn.js";import{P as T}from"./index-ChdDc4Yc.js";import{G as p}from"./index-D-pQ_u0A.js";import{L as _,H as z}from"./HybridDisplay-CqQcAzRR.js";import{T as O}from"./TextInput-CtSk-fS6.js";import{I as D}from"./InputLabel-CVPUTz-D.js";import{I as G}from"./InputError-BX4_ni9E.js";import{h as V}from"./Utilities-m0eG5Gao.js";import{M as P}from"./Modal-DkJ05YuX.js";function K(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M321.94 98 158.82 237.78a24 24 0 0 0 0 36.44L321.94 414c15.57 13.34 39.62 2.28 39.62-18.22v-279.6c0-20.5-24.05-31.56-39.62-18.18z"},child:[]}]})(e)}function R(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m190.06 414 163.12-139.78a24 24 0 0 0 0-36.44L190.06 98c-15.57-13.34-39.62-2.28-39.62 18.22v279.6c0 20.5 24.05 31.56 39.62 18.18z"},child:[]}]})(e)}function W(e){return p({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M112 64a16 16 0 0 1 16 16v136.43L360.77 77.11a35.13 35.13 0 0 1 35.77-.44c12 6.8 19.46 20 19.46 34.33v290c0 14.37-7.46 27.53-19.46 34.33a35.14 35.14 0 0 1-35.77-.45L128 295.57V432a16 16 0 0 1-32 0V80a16 16 0 0 1 16-16z"},child:[]}]})(e)}function $(e){let s=e.answer.answer_text;isNaN(s)||(s="$"+s+"$");let n=e.selected?"border-2 border-slate-400":"",i=e.selectable?"cursor-pointer":"";return t.jsx("div",{className:`py-16 ${i}`,onClick:()=>e.select(e.answer),children:t.jsx("div",{className:"max-w-7xl space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:`bg-white ${n} m-2 p-6 shadow-xl sm:rounded-lg sm:p-4`,children:t.jsx(_,{children:s})})})})}function Y(e){const[s,n]=m.useState(0),[i,u]=m.useState(e.answered),h=l=>{i||(n(l.id),e.answerSelect(l))};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:[t.jsx("div",{className:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8 text-center pt-2 text-base",children:"Escoge la respuesta correcta:"}),t.jsx("div",{className:"flex justify-center flex-wrap",children:e.answers.map((l,o)=>t.jsx($,{answer:l,select:h,selected:l.id===s,selectable:!i},o))})]})})})}function q(e){const[s,n]=m.useState([]),[i,u]=m.useState(e.answered),h=e.numCorrect>1?"s":"",l=o=>{let d=[...s],x=o.id,f=d.indexOf(x);f>=0?d.splice(f,1):d.push(x),d.length<=e.numCorrect&&n(d)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:[t.jsxs("div",{className:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8 text-center pt-2 text-base",children:["Escoge todas las respuestas correctas y luego haz clic en Enviar. Hay ",e.numCorrect," respuesta",h," correcta",h,"."]}),t.jsx("div",{className:"flex justify-center flex-wrap",children:e.answers.map((o,d)=>{let x=s.indexOf(o.id)>=0;return t.jsx($,{answer:o,select:l,selected:x,selectable:!i},d)})})]})}),!i&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(s),u(!1)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Enviar"})})]})}function J(e){const[s,n]=m.useState(""),[i,u]=m.useState(e.answered),h=l=>{let o=l.target.value;n(V(o))};return console.log(e,i),t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:t.jsxs("div",{className:"mt-4",children:[t.jsx(D,{htmlFor:"myAnswer",value:"Tecla la respuesta:"}),t.jsx(O,{id:"myAnswer",type:"text",name:"myAnswer",value:s,className:"mt-1 block w-full",isFocused:!0,onChange:l=>n(l.target.value),onBlur:h,disabled:i,onKeyDown:l=>{l.key==="Enter"&&(e.answerSelect(s),u(!1))}}),t.jsx(G,{message:"",className:"mt-2"})]})})}),!i&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(s),n(""),u(!0)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Submit"})})]})}function ae(e){const[s,n]=m.useState(e.problem.problem_text),[i,u]=m.useState(!1),[h,l]=m.useState(null),[o,d]=m.useState("right");console.log(e.problem.problem_text);const x=a=>{e.numberCorrect;let r=0,c=0;e.answers.forEach(b=>{let y=a.indexOf(b.id)>=0;b.is_correct&&(c++,y&&r++)});let w=c?Math.floor(.5+100*(100*r/c))/100:1;l(w);let S=r+" correctos de "+c+" para "+w+"%";fetch(route("results.recordanswer",{id:e.problem.id,answers:a,score:w})),e.handleAnswer(e.problem.id,w,S)};m.useEffect(()=>{console.log("props",e)},[e.ctr]);const f=a=>{let r,c;a.is_correct?(r=100,c=A()):(r=0,c=H()),l(r),fetch(route("results.recordanswer",{id:e.problem.id,answers:[a.id],score:r})),e.handleAnswer(e.problem.id,r,c)},A=()=>{const a=["Así es!","Bien!","Correcto!","Excelente!"];return a[Math.floor(a.length*Math.random())]},H=()=>{const a=["Casi...","Hmm, no...","No creo...","No estoy de acuerdo...!"];return a[Math.floor(a.length*Math.random())]},M=a=>{let r,c,w=parseFloat(e.answers[0].answer_text),S=parseFloat(e.answers[0].pct_tolerance),b=(1-S)*w,y=(1+S)*w;if(y<b){let B=y;y=b,b=B}console.log(a,w,S,y,b),a>=b&&a<=y?(r=100,c=A()):(r=0,c=H()),l(r),fetch(route("results.recordanswer",{id:e.problem.id,answers:a,score:r})),console.log(r,c),e.handleAnswer(e.problem.id,r,c)};let N,C,k=e.totalHints<=0,g=k?"text-slate-400":"",j=k?"":"cursor-pointer",v=k?()=>{}:e.hint,F=t.jsx(T,{className:`${j} ${g}`,onClick:v,title:"enséñame los pasos"});g=e.hasNextProblem?"":"text-slate-400",j=e.hasNextProblem?"cursor-pointer":"",v=e.hasNextProblem?e.next:()=>{};let E=e.hints===null?"":t.jsx(R,{className:`${j} ${g}`,onClick:v,title:"próximo problema"});g=e.hasPrevProblem?"":"text-slate-400",j=e.hasPrevProblem?"cursor-pointer":"",v=e.hasPrevProblem?e.prev:()=>{};let L=e.hints===null?"":t.jsx(K,{className:`${j} ${g}`,onClick:v,title:"problema anterior"});g=e.problem!=null?"":"text-slate-400",j=e.problem!=null?"cursor-pointer":"",v=e.problem!=null?e.restart:()=>{};let I=e.hints===null?"":t.jsx(W,{className:`${j} ${g} text-sm37`,onClick:v,title:"reiniciar"});return e.problem.display_type==="text"&&(N=t.jsx("div",{dangerouslySetInnerHTML:{__html:e.problem.problem_text}})),e.problem.display_type==="latex"&&(N=t.jsx(_,{children:e.problem.problem_text})),e.problem.display_type==="pdf"&&(N=t.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),e.problem.display_type==="hybrid"&&(N=t.jsx(z,{content:e.problem.problem_text})),e.problem.problem_type_id===1&&(C=t.jsx(Y,{answers:e.answers,answered:e.answered,answerSelect:f})),e.problem.problem_type_id===2&&(C=t.jsx(q,{answers:e.answers,answered:e.answered,answerSelect:x,numCorrect:e.numberCorrect})),(e.problem.problem_type_id===3||e.problem.problem_type_id===4)&&(C=t.jsx(J,{answers:e.answers,answered:e.answered,answerSelect:M})),e.answered&&(C=t.jsx("div",{className:"mx-auto w-full text-center bg-slate-500/50",children:"Ya contestaste este problema"})),t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto max-w-7xl space-y-1 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white px-4 shadow sm:rounded-lg sm:px-8 sm:py-2",children:[F,E,L,I,t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:N})})}),C]})})})}function re(e){let s="bg-orange-300";e.points>=90&&(s="bg-green-300"),e.points===0&&(s="bg-red-300");const n=e.showHint?e.hints[0].hint:e.feedback;return t.jsx("div",{className:"mx-auto my-6 max-w-7xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(P,{show:e.show,onClose:e.onClose,children:t.jsx("div",{className:`${s} p-4 shadow sm:rounded-lg`,children:t.jsxs("div",{className:"flex justify-between",children:[n,t.jsxs("div",{className:"flex justify-col",children:[t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.onClose,children:"cerrar"}),e.hasHints&&t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.closeAndShowHints,children:"ver los pasos"}),e.hasNextProblem&&t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.next,children:"siguiente"})]})]})})})})}function ie(e){let s=[],n=[],i=0;e.hints&&e.hints.length>0&&(n=e.hints),n.forEach(x=>{i++<e.hintsToShow&&s.unshift(t.jsx("div",{children:t.jsx(_,{children:x.hint})}))});let u=s.map((x,f)=>{let A=f>0?"text-slate-400":"text-slate-600";return t.jsx("div",{className:`my-4 ${A}`,children:x},f)});function h(){e.nextHint()}let l=e.hintsToShow<n.length,o=h,d="cursor-pointer text-black";return l||(o=()=>{},d="text-slate-200"),t.jsx("div",{className:"mx-auto my-6 max-w-5xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(P,{show:e.show,onClose:e.onClose,maxWidth:"5xl",children:t.jsxs("div",{className:"bg-white p-1 shadow sm:rounded-lg flex flex-row max-w-5xl overflow-y-auto h-[90lvh] py-4 my-4",children:[t.jsxs("div",{className:"flex flex-col min-w-[20%]",children:[t.jsx("div",{className:`${d} cursor-pointer bg-white p-2 m-2 rounded-lg`,onClick:o,children:"siguiente paso"}),t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.onClose,children:"cerrar"})]}),t.jsx("div",{className:"w-full",children:t.jsx("div",{className:"flex flex-col max-h-dvh",children:u})})]})})})}export{re as F,ie as H,ae as S};
