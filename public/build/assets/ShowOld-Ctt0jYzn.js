import{r as a,j as e,B as L}from"./app-CjSFMGnC.js";import{A as M}from"./AuthenticatedLayout-CfJRKZNh.js";import{F as C,A as N,M as k}from"./FeedbackComponent-BzTkICwC.js";import{L as H,H as B}from"./HybridDisplay-POwElJL8.js";import{T as E,L as F}from"./TopMenu-C0ezvCYt.js";import"./ApplicationLogo-DB8lIolN.js";import"./transition-CenZjv0w.js";import"./Modal-B9n019yc.js";const J=({auth:n,prob:s,answers:i,lesson:l,problemIds:g,lessonIds:_})=>{const[w,I]=a.useState(s.problem_text),[T,p]=a.useState(!1),[x,f]=a.useState(null),[b,d]=a.useState("right"),u=`${l.name}`,S=o=>{let t=0,h=i.length;i.forEach(y=>{let j=o.indexOf(y.id)>=0;y.is_correct?j&&t++:j||t++});let m=Math.floor(.5+100*(100*t/h))/100;f(m),p(!0),d("you scored "+t+" out of "+h+" for "+m+"%"),fetch(route("results.recordanswer",{id:s.id,answers:o,score:m}))},A=o=>{let t;o.is_correct?(t=100,d("Correct!")):(t=0,d("Not quite!")),p(!0),f(t),fetch(route("results.recordanswer",{id:s.id,answers:[o.id],score:t}))};let r,c;s.display_type==="text"&&(r=e.jsx("div",{dangerouslySetInnerHTML:{__html:w}})),s.display_type==="latex"&&(r=e.jsx(H,{children:s.problem_text})),s.display_type==="pdf"&&(r=e.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),s.display_type==="hybrid"&&(r=e.jsx(B,{content:s.problem_text})),s.problem_type_id===1&&(c=e.jsx(N,{answers:i,answerSelect:A})),s.problem_type_id===2&&(c=e.jsx(k,{answers:i,answerSelect:S}));let v=e.jsx(E,{auth:n,title:u,lessonId:l.id,neighboringProblems:g,show:["home","lesson","prob-set","prob-nav"]});return e.jsxs(M,{auth:n,user:n.user,header:!1,topMenu:v,children:[e.jsx(L,{title:u}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:r})})}),c,x!==null&&e.jsx(C,{feedback:b,points:x}),e.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:e.jsx("div",{className:"p-4 text-base sm:rounded-lg sm:p-1",children:e.jsx(F,{neighbors:_,lesson:l,showLessonLink:!0})})})]})};export{J as default};
