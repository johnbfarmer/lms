import{j as t,r as o}from"./app-CMabPw1R.js";import{G as A}from"./TopMenu-DwjcGoy8.js";import{L as H,H as E}from"./HybridDisplay-BRHhe3FG.js";import{T as B}from"./TextInput-CLIINFVg.js";import{I as T}from"./InputLabel-Dqk0wmMS.js";import{I as V}from"./InputError-Kaww1VU-.js";import{h as z}from"./Utilities-Dr_LsU1D.js";import{M as _}from"./Modal-C4Odr3WQ.js";function O(e){return A({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M248,56a8,8,0,0,1-8,8H192v40a8,8,0,0,1-8,8H136v40a8,8,0,0,1-8,8H80v40a8,8,0,0,1-8,8H16a8,8,0,0,1,0-16H64V152a8,8,0,0,1,8-8h48V104a8,8,0,0,1,8-8h48V56a8,8,0,0,1,8-8h56A8,8,0,0,1,248,56Z"},child:[]}]})(e)}function R(e){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M321.94 98 158.82 237.78a24 24 0 0 0 0 36.44L321.94 414c15.57 13.34 39.62 2.28 39.62-18.22v-279.6c0-20.5-24.05-31.56-39.62-18.18z"},child:[]}]})(e)}function q(e){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m190.06 414 163.12-139.78a24 24 0 0 0 0-36.44L190.06 98c-15.57-13.34-39.62-2.28-39.62 18.22v279.6c0 20.5 24.05 31.56 39.62 18.18z"},child:[]}]})(e)}function D(e){return A({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M112 64a16 16 0 0 1 16 16v136.43L360.77 77.11a35.13 35.13 0 0 1 35.77-.44c12 6.8 19.46 20 19.46 34.33v290c0 14.37-7.46 27.53-19.46 34.33a35.14 35.14 0 0 1-35.77-.45L128 295.57V432a16 16 0 0 1-32 0V80a16 16 0 0 1 16-16z"},child:[]}]})(e)}function $(e){let s=e.answer.answer_text;isNaN(s)||(s="$"+s+"$");let a=e.selected?"border-2 border-slate-400":"",r=e.selectable?"cursor-pointer":"";return t.jsx("div",{className:`py-16 ${r}`,onClick:()=>e.select(e.answer),children:t.jsx("div",{className:"max-w-7xl space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:`bg-white ${a} m-2 p-6 shadow-xl sm:rounded-lg sm:p-4`,children:t.jsx(H,{children:s})})})})}function G(e){const[s,a]=o.useState(0),[r,x]=o.useState(!1),h=l=>{r||(a(l.id),e.answerSelect(l))};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:[t.jsx("div",{className:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8 text-center pt-2 text-base",children:"Escoge la respuesta correcta:"}),t.jsx("div",{className:"flex justify-center flex-wrap",children:e.answers.map((l,i)=>t.jsx($,{answer:l,select:h,selected:l.id===s,selectable:!r},i))})]})})})}function K(e){const[s,a]=o.useState([]),[r,x]=o.useState(!1),h=e.numCorrect>1?"s":"",l=i=>{let d=[...s],u=i.id,j=d.indexOf(u);j>=0?d.splice(j,1):d.push(u),d.length<=e.numCorrect&&a(d)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:[t.jsxs("div",{className:"mx-auto max-w-7xl space-y-6 sm:px-6 lg:px-8 text-center pt-2 text-base",children:["Escoge todas las respuestas correctas y luego haz clic en Enviar. Hay ",e.numCorrect," respuesta",h," correcta",h,"."]}),t.jsx("div",{className:"flex justify-center flex-wrap",children:e.answers.map((i,d)=>{let u=s.indexOf(i.id)>=0;return t.jsx($,{answer:i,select:l,selected:u,selectable:!r},d)})})]})}),!r&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(s),x(!1)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Enviar"})})]})}function W(e){const[s,a]=o.useState(""),[r,x]=o.useState(!1),h=l=>{let i=l.target.value;a(z(i))};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-4 shadow text-2xl sm:rounded-lg sm:p-8",children:t.jsxs("div",{className:"mt-4",children:[t.jsx(T,{htmlFor:"myAnswer",value:"Tecla la respuesta:"}),t.jsx(B,{id:"myAnswer",type:"text",name:"myAnswer",value:s,className:"mt-1 block w-full",isFocused:!0,onChange:l=>a(l.target.value),onBlur:h,onKeyDown:l=>{l.key==="Enter"&&(e.answerSelect(s),x(!1))}}),t.jsx(V,{message:"",className:"mt-2"})]})})}),!r&&t.jsx("div",{className:"mx-auto w-48 text-center my-6 space-y-6 sm:px-6 lg:px-8 cursor-pointer",onClick:()=>{e.answerSelect(s),a(""),x(!1)},children:t.jsx("div",{className:"bg-white p-6 shadow sm:rounded-lg sm:p-4",children:"Submit"})})]})}function se(e){const[s,a]=o.useState(e.problem.problem_text),[r,x]=o.useState(!1),[h,l]=o.useState(null),[i,d]=o.useState("right"),u=m=>{e.numberCorrect;let n=0,c=e.answers.length;e.answers.forEach(b=>{let g=m.indexOf(b.id)>=0;b.is_correct?g&&n++:g||n++});let f=Math.floor(.5+100*(100*n/c))/100;l(f);let p="you scored "+n+" out of "+c+" for "+f+"%";fetch(route("results.recordanswer",{id:e.problem.id,answers:m,score:f})),e.handleAnswer(e.problem.id,f,p)},j=m=>{let n,c;m.is_correct?(n=100,c="Correct!"):(n=0,c="Not quite!"),l(n),fetch(route("results.recordanswer",{id:e.problem.id,answers:[m.id],score:n})),e.handleAnswer(e.problem.id,n,c)},w=m=>{let n,c;console.log(e.answers);let f=parseFloat(e.answers[0].answer_text),p=parseFloat(e.answers[0].pct_tolerance),b=(1-p)*f,g=(1+p)*f;if(g<b){let I=g;g=b,b=I}console.log(m,f,p,g,b),m>=b&&m<=g?(n=100,c="Correct!"):(n=0,c="Not quite!"),l(n),fetch(route("results.recordanswer",{id:e.problem.id,answers:m,score:n})),console.log(n,c),e.handleAnswer(e.problem.id,n,c)};let v,S,k=e.totalHints<=0,y=k?"text-slate-400":"",N=k?"":"cursor-pointer",C=k?()=>{}:e.hint,P=t.jsx(O,{className:`${N} ${y}`,onClick:C,title:"enséñame los pasos"});y=e.hasNextProblem?"":"text-slate-400",N=e.hasNextProblem?"cursor-pointer":"",C=e.hasNextProblem?e.next:()=>{};let F=e.hints===null?"":t.jsx(q,{className:`${N} ${y}`,onClick:C,title:"próximo problema"});y=e.hasPrevProblem?"":"text-slate-400",N=e.hasPrevProblem?"cursor-pointer":"",C=e.hasPrevProblem?e.prev:()=>{};let L=e.hints===null?"":t.jsx(R,{className:`${N} ${y}`,onClick:C,title:"problema anterior"});y=e.problem!=null?"":"text-slate-400",N=e.problem!=null?"cursor-pointer":"",C=e.problem!=null?e.restart:()=>{};let M=e.hints===null?"":t.jsx(D,{className:`${N} ${y} text-sm37`,onClick:C,title:"reiniciar"});return e.problem.display_type==="text"&&(v=t.jsx("div",{dangerouslySetInnerHTML:{__html:e.problem.problem_text}})),e.problem.display_type==="latex"&&(v=t.jsx(H,{children:e.problem.problem_text})),e.problem.display_type==="pdf"&&(v=t.jsx("iframe",{src:`/storage/${pageAssets.pdf}.pdf`,style:{width:"900px",height:"1200px"},frameBorder:"0"})),e.problem.display_type==="hybrid"&&(v=t.jsx(E,{content:e.problem.problem_text})),e.problem.problem_type_id===1&&(S=t.jsx(G,{answers:e.answers,answerSelect:j})),e.problem.problem_type_id===2&&(S=t.jsx(K,{answers:e.answers,answerSelect:u,numCorrect:e.numberCorrect})),(e.problem.problem_type_id===3||e.problem.problem_type_id===4)&&(S=t.jsx(W,{answers:e.answers,answerSelect:w})),t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto max-w-7xl space-y-1 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white px-4 shadow sm:rounded-lg sm:px-8 sm:py-2",children:[P,F,L,M,t.jsx("div",{className:"py-2",children:t.jsx("div",{className:"mx-auto space-y-6 sm:px-6 lg:px-8",children:t.jsx("div",{className:"text-center bg-white p-1 shadow text-2xl sm:rounded-lg sm:p-8",children:v})})}),S]})})})}function le(e){let s="bg-orange-300";e.points>=90&&(s="bg-green-300"),e.points===0&&(s="bg-red-300");const a=e.showHint?e.hints[0].hint:e.feedback;return t.jsx("div",{className:"mx-auto my-6 max-w-7xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(_,{show:e.show,onClose:e.onClose,children:t.jsx("div",{className:`${s} p-4 shadow sm:rounded-lg`,children:t.jsxs("div",{className:"flex justify-between",children:[a,t.jsxs("div",{className:"flex justify-col",children:[e.hasHints&&t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.hint,children:"hint"}),t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.next,children:"next"})]})]})})})})}function ne(e){let s=[],a=[],r=0;const x=o.useRef(null);e.hints&&e.hints.length>0&&(a=e.hints),a.forEach(w=>{r++<e.hintsToShow&&s.push(t.jsx("div",{children:t.jsx(H,{children:w.hint})}))});let h=s.map((w,v)=>t.jsx("div",{className:"my-4",children:w},v));const l=()=>{var w;(w=x.current)==null||w.scrollIntoView()};async function i(){await e.nextHint(),l()}let d=e.hintsToShow<a.length,u=i,j="cursor-pointer text-black";return d||(u=()=>{},j="text-slate-200"),t.jsx("div",{className:"mx-auto my-6 max-w-5xl space-y-6 sm:px-6 lg:px-8",children:t.jsx(_,{show:e.show,onClose:e.onClose,maxWidth:"5xl",children:t.jsxs("div",{className:"bg-white p-1 shadow sm:rounded-lg flex flex-row max-w-5xl h-[400px] overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col min-w-[20%] h-full",children:[t.jsx("div",{className:`${j} cursor-pointer bg-white p-2 m-2 rounded-lg`,onClick:u,children:"siguiente paso"}),t.jsx("div",{className:"cursor-pointer bg-white p-2 m-2 rounded-lg",onClick:e.onClose,children:"cerrar"})]}),t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"flex flex-col max-h-[400px] overflow-y-auto",children:[h,t.jsx("div",{ref:x})]})})]})})})}export{le as F,ne as H,se as S};
